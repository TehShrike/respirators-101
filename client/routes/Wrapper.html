<div class="maxwidth">

	<div class="wrapper" data-menu-visible="{{visibleSlideOut}}">

		<div class="left">

			<div class="appname">Respirators 101</div>

			<div class="main">
				<Menu :asr></Menu>
			</div>

			{{#if !visibleSlideOut}}
			<div class="debutterfinger"></div>
			{{/if}}
		</div>


		<div class="right">
			{{#if visibleSlideOut}}
			<div class="anythingelsebutton" on:click="set({visibleSlideOut: false})"></div>
			{{/if}}

			<nav>
				<div class="one"><button class="menu" on:click="set({visibleSlideOut: true})"></button></div>
				<div class="title">{{ title }}</div>
				<div class="two"><a class="home" href="{{ asr.makePath('wrapper.home') }}"></a></div>
			</nav>

			<div class="main">
				<uiView></uiView>
			</div>
		</div>

	</div>

</div>

<script>

	import Menu from 'lib/Menu.html'
	import categories from 'data/categories.json'
	import posts from 'data/posts.json'

	export default {
		components: {
			Menu
		},
		oncreate () {
			// captures event from router
			this.on('stateChange', (params) => {

				if(params.catid) {
					if(categories[params.catid]) {
						this.set({ title: categories[params.catid].title })
					}
				} else {
					if(posts[params.id]) {
						this.set({ title: posts[params.id] })
					}
				}

				this.set({visibleSlideOut: false})
			})
		}, 
		data() {
			return { 
				visibleSlideOut: false,
				title: ''
			}
		}
	}

</script>

<style>

	@import "colors";

	.maxwidth {
		position:absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		max-width: 800px;
		margin: 0 auto;
		overflow:hidden;
	}

	.wrapper {

		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		width: calc(100% + 300px);
		transition: all .2s ease;

		&[data-menu-visible=false] {
			left: -300px;

			button.menu {
				background-image: url('icons/menu.svg');
			}
		}

		&[data-menu-visible=true] {
			left: 0;

			button.menu {
				background-image: url('icons/x.svg');
			}
		}

	}

	.left {
		position: absolute;
		top: 0;
		right: calc(100% - 300px); 
		bottom: 0;
		left: 0;
		background: $blue3;
		color: #fff;
		font-size: 14px;
	}

	.right {
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 300px;
	}
	
	nav {
		width: 100%;
		height: 50px;
		background: $blue3;
		display: table;

		> div {
			display: table-cell;
			vertical-align: middle;
			color: #fff;
		}

		.one, .two {
			width: 50px;
		}
		.title {
			width: 100%;
			text-align: center;
			font-family: "Roboto Condensed";
			text-transform: uppercase;
		}
	}

	.main {
		position: absolute;
		top: 50px;
		right: 0;
		left:0;
		bottom: 0;
		overflow: scroll;
	}

	::-webkit-scrollbar { 
	    display: none; 
	}

	.appname {
		font-family: "Roboto Condensed";
		text-align: left;
		line-height: 50px;
		padding: 0 20px;
		text-transform: uppercase;
	}

	button.menu, a.home {
		width: 50px;
		height: 50px;
		display: block;
		border: 0;
		cursor: pointer;
		background-color: $blue3;
		background-size: 60%;
		background-repeat: no-repeat;
		background-position: center;
	}
	a.home {
		background-size: 50%;
		background-image: url(icons/icon-home.png);
	}

	.anythingelsebutton, .debutterfinger {
		position:absolute;
		top:0;
		right:0;
		bottom:0;
		left:0;
		z-index: 1;
	}

</style>